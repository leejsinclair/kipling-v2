#!/usr/bin/env sh

if ! command -v npm >/dev/null 2>&1; then
	export NVM_DIR="${NVM_DIR:-$HOME/.nvm}"

	if [ -s "$NVM_DIR/nvm.sh" ]; then
		. "$NVM_DIR/nvm.sh"
	elif [ -s "/usr/local/opt/nvm/nvm.sh" ]; then
		. "/usr/local/opt/nvm/nvm.sh"
	elif [ -s "/opt/homebrew/opt/nvm/nvm.sh" ]; then
		. "/opt/homebrew/opt/nvm/nvm.sh"
	fi
fi

if ! command -v npm >/dev/null 2>&1; then
	echo "Husky: npm not found. Ensure Node is installed and nvm is configured for non-interactive shells." >&2
	exit 127
fi

npm test -- --run
